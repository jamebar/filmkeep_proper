<div ng-switch="feed_item.verb" >

  <!-- REVIEW FEED ITEM -->
  <div class="feed-item clearfix" ng-switch-when="filmkeep\review">
    <!-- <img ng-src="%%feed_item.activities[0].actor.avatar | profileFilter%%" width="60" height="60" class="circle-corners avatar" /> -->
    <avatar class="avatar" info="feed_item.activities[0].actor"></avatar>
    <span class="feed-date pull-right">%%feed_item.updated_at.date | fDate %%</span>
    <span class="feed-actor">
        <a ui-sref='root.user.filmkeep({username: feed_item.activities[0].actor.username})'>%%feed_item.activities[0].actor.name%%</a>
    </span>
    %% feed_item.verb | verb %%
    <span ng-if="feed_item.activity_count>1">%%feed_item.activity_count%% films</span>
    <a ui-sref='root.review({reviewId: feed_item.activities[0].object.id})' ng-if="feed_item.activity_count===1">%%feed_item.activities[0].object.film.title%%</a>
    
    <div class="clearfix">
      <div ng-repeat="activity in feed_item.activities" class="activity-item activity-review" ng-class="{pullup:$index==0, collapsed:$index>0}">
        <span ng-if="$index==0">
          <div class="feed-review-cover" style="background-image:url(%%activity.object.film.backdrop_path | imageFilter :'backdrop':'1' %%)">
            <div class="cover"></div>
          </div>
          <div class="feed-review-wrapper clearfix">
            <div class="feed-review-poster pull-left">
                <film-object film="activity.object.film" type="vertical" review="activity.object"></film-object>
            </div>
            <span class="title">%%activity.object.film.title%%</span>
            <div class="feed-review-ratings " >
              <div ng-repeat="rating in activity.object.ratings | limitTo: 5">
                <p type="rating.rating_type" rating-type-label></p>
                <div class="progress" >
                  <div class="progress-bar" role="progressbar" aria-valuenow="%%rating.value%%" aria-valuemin="0" aria-valuemax="2000" style="width: %%toPercent(rating.value)%%%;">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="feed-review-notes" >%%activity.object.notes | limitTo : 100%%%%activity.object.notes.length > 100 ? "..." : ""%%</div>
          </span>
          <span ng-if="$index > 0">
            <film-object film="activity.object.film" review="activity.object" horizontal="true" ></film-object>
          </span>
        </div>
      
    </div>
  </div>

<!-- WATCHLIST FEED ITEM -->
  <div class="feed-item clearfix" ng-switch-when="filmkeep\watchlist">
    <!-- <img ng-src="%%feed_item.activities[0].actor.avatar | profileFilter%%" width="60" height="60" class="circle-corners avatar" /> -->
    <avatar class="avatar" info="feed_item.activities[0].actor"></avatar>
    <span class="feed-date pull-right">%%feed_item.updated_at.date | fDate %%</span>
    <span class="feed-actor">
        <a ui-sref='root.user.filmkeep({username: feed_item.activities[0].actor.username})'>%%feed_item.activities[0].actor.name%%</a>
    </span>
    %% feed_item.verb | verb %%
    <span ng-if="feed_item.activity_count>1">%%feed_item.activity_count%% films</span>
    <a ui-sref='root.film({filmId: feed_item.activities[0].object.film.tmdb_id, filmSlug: slugify(feed_item.activities[0].object.film.title)})' ng-if="feed_item.activity_count===1">%%feed_item.activities[0].object.film.title%%</a>
     to the watchlist
    
    <div class="clearfix">
      <div ng-repeat="activity in feed_item.activities" class="activity-item" ng-class="{multi: feed_item.activity_count>2}">
          <film-object film="activity.object.film" horizontal="true" ></film-object>
      </div>
    </div>

  </div>

  <!-- FOLLOWER FEED ITEM -->
  <div class="feed-item clearfix" ng-switch-when="filmkeep\follower">
    <!-- <img ng-src="%%feed_item.activities[0].actor.avatar | profileFilter%%" width="60" height="60" class="circle-corners avatar" /> -->
    <avatar class="avatar" info="feed_item.activities[0].actor"></avatar>
    <span class="feed-date pull-right">%%feed_item.updated_at.date | fDate %%</span>
    <span class="feed-actor">
        <a ui-sref='root.user.filmkeep({username: feed_item.activities[0].actor.username})'>%%feed_item.activities[0].actor.name%%</a>
    </span>
    %% feed_item.verb | verb %%
    <!-- <span ng-if="feed_item.activity_count>1">%%feed_item.activity_count%% films</span> -->
    
    <span ng-repeat="activity in feed_item.activities | limitTo:3" >
        <a ui-sref='root.user.filmkeep({username: activity.object.target.username})'>%%activity.object.target.name%%<span ng-hide="$last">, </span></a>
    </span>
    <span ng-show="feed_item.activities.length > 3"> and %%feed_item.activities.length - 3%% others
    </span>

  </div>

</div>